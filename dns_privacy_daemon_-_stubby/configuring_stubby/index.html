<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.86.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Configuring Stubby :: dnsprivacy.org</title>

    
    <link href="/css/nucleus.css?1669828798" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1669828798" rel="stylesheet">
    <link href="/css/hybrid.css?1669828798" rel="stylesheet">
    <link href="/css/featherlight.min.css?1669828798" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1669828798" rel="stylesheet">
    <link href="/css/auto-complete.css?1669828798" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1669828798" rel="stylesheet">
    <link href="/css/theme.css?1669828798" rel="stylesheet">
    <link href="/css/tabs.css?1669828798" rel="stylesheet">
    <link href="/css/hugo-theme.css?1669828798" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1669828798" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1669828798"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/dns_privacy_daemon_-_stubby/configuring_stubby/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/'>
  <p style="color: #fafafa;font-size:34px;font-weight: 400; font-family:Helvetica Neue, arial, courier;"><strong>DNS Privacy Project</strong></p>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1669828798"></script>
<script type="text/javascript" src="/js/auto-complete.js?1669828798"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/dnsprivacy.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1669828798"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/the_problem/" title="The Problem" class="dd-item
        
        
        
        ">
      <a href="/the_problem/">
          1. The Problem
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/the_solutions/" title="The Solutions" class="dd-item
        
        
        
        ">
      <a href="/the_solutions/">
          2. The Solutions
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/current_work/" title="Current Work" class="dd-item
        
        
        
        ">
      <a href="/current_work/">
          3. Current Work
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ietf_dns_privacy_tutorial/" title="IETF DNS Privacy Tutorial" class="dd-item
        
        
        
        ">
      <a href="/ietf_dns_privacy_tutorial/">
          4. IETF DNS Privacy Tutorial
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/public_resolvers/" title="Public Resolvers" class="dd-item
        
        
        
        ">
      <a href="/public_resolvers/">
          5. Public Resolvers
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/test_servers/" title="Test Servers" class="dd-item
        
        
        
        ">
      <a href="/test_servers/">
          6. Test Servers
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/test_servers/map_of_test_server_locations/" title="Map of test server locations" class="dd-item ">
        <a href="/test_servers/map_of_test_server_locations/">
        6.1. Map of test server locations
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/test_servers/monitoring/" title="dnsprivacy Monitoring" class="dd-item ">
        <a href="/test_servers/monitoring/">
        6.2. dnsprivacy Monitoring
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/test_servers/live_traffic_levels/" title="Live Traffic Levels" class="dd-item ">
        <a href="/test_servers/live_traffic_levels/">
        6.2. Live Traffic Levels
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dns_privacy_clients/" title="DNS Privacy Clients" class="dd-item
        
        
        
        ">
      <a href="/dns_privacy_clients/">
          7. DNS Privacy Clients
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dns_privacy_daemon_-_stubby/" title="DNS Privacy Daemon - Stubby" class="dd-item
        parent
        
        
        ">
      <a href="/dns_privacy_daemon_-_stubby/">
          8. DNS Privacy Daemon - Stubby
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/about_stubby/" title="About Stubby" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/about_stubby/">
        8.1. About Stubby
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/configuring_stubby/" title="Configuring Stubby" class="dd-item active">
        <a href="/dns_privacy_daemon_-_stubby/configuring_stubby/">
        8.2. Configuring Stubby
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/stubby_manager_gui/" title="Stubby Manager GUI" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/stubby_manager_gui/">
        8.3. Stubby Manager GUI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/" title="Installation" class="dd-item
        
        
        
        ">
      <a href="/dns_privacy_daemon_-_stubby/installation/">
          8.4. Installation
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/linux_from_source/" title="Linux From Source" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/installation/linux_from_source/">
        8.4.1. Linux From Source
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/running_as_a_service_on_nix/" title="Running as a service on *nix" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/installation/running_as_a_service_on_nix/">
        8.4.2. Running as a service on *nix
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/macos_homebrew/" title="MacOS Homebrew" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/installation/macos_homebrew/">
        8.4.3. MacOS Homebrew
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/stubby_gui_for_macos/" title="Stubby GUI for macOS" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/installation/stubby_gui_for_macos/">
        8.4.4. Stubby GUI for macOS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dns_privacy_daemon_-_stubby/installation/windows_installer_for_stubby/" title="Windows installer for Stubby" class="dd-item ">
        <a href="/dns_privacy_daemon_-_stubby/installation/windows_installer_for_stubby/">
        8.4.5. Windows installer for Stubby
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/implementation_status/" title="Implementation Status" class="dd-item
        
        
        
        ">
      <a href="/implementation_status/">
          9. Implementation Status
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/running_a_dns_privacy_server/" title="Running a DNS Privacy server" class="dd-item
        
        
        
        ">
      <a href="/running_a_dns_privacy_server/">
          10. Running a DNS Privacy server
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/using_unbound/" title="Using Unbound" class="dd-item ">
        <a href="/running_a_dns_privacy_server/using_unbound/">
        10.1. Using Unbound
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/using_knot_resolver/" title="Using Knot Resolver" class="dd-item ">
        <a href="/running_a_dns_privacy_server/using_knot_resolver/">
        10.2. Using Knot Resolver
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/using_dnsdist/" title="Using dnsdist" class="dd-item ">
        <a href="/running_a_dns_privacy_server/using_dnsdist/">
        10.3. Using dnsdist
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/running_a_dns_privacy_server/using_a_tls_proxy/" title="Using a TLS proxy" class="dd-item
        
        
        
        ">
      <a href="/running_a_dns_privacy_server/using_a_tls_proxy/">
          10.4. Using a TLS proxy
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/using_a_tls_proxy/building_haproxy_using_tlsv1_3/" title="Building HAProxy using TLSv1.3" class="dd-item ">
        <a href="/running_a_dns_privacy_server/using_a_tls_proxy/building_haproxy_using_tlsv1_3/">
        10.4.1. Building HAProxy using TLSv1.3
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/" title="Let&#39;s Encrypt Certificate renewal" class="dd-item
        
        
        
        ">
      <a href="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/">
          10.5. Let&#39;s Encrypt Certificate renewal
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/automated_certificate_management_1/" title="Certificate management Method 1" class="dd-item ">
        <a href="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/automated_certificate_management_1/">
        10.5.1. Certificate management Method 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/automated_certificate_management_2/" title="Certificate management method 2" class="dd-item ">
        <a href="/running_a_dns_privacy_server/lets_encrypt_certificate_renewal/automated_certificate_management_2/">
        10.5.2. Certificate management method 2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/monitoring_privacy_servers/" title="Monitoring Privacy servers" class="dd-item ">
        <a href="/running_a_dns_privacy_server/monitoring_privacy_servers/">
        10.6. Monitoring Privacy servers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/running_a_dns_privacy_server/best_current_practices/" title="Best Current Practices" class="dd-item
        
        
        
        ">
      <a href="/running_a_dns_privacy_server/best_current_practices/">
          10.7. Best Current Practices
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/best_current_practices/comparison_of_policy_and_privacy_statements_2019/" title="Comparison of policy and privacy statements 2019" class="dd-item ">
        <a href="/running_a_dns_privacy_server/best_current_practices/comparison_of_policy_and_privacy_statements_2019/">
        10.7.1. Comparison of policy and privacy statements 2019
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/running_a_dns_privacy_server/best_current_practices/data_minimisation_of_dns_traffic/" title="Data minimisation of DNS traffic" class="dd-item ">
        <a href="/running_a_dns_privacy_server/best_current_practices/data_minimisation_of_dns_traffic/">
        10.7.2. Data minimisation of DNS traffic
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/encrypted-zone-transfer/" title="Encrypted Zone Transfer" class="dd-item
        
        
        
        ">
      <a href="/encrypted-zone-transfer/">
          11. Encrypted Zone Transfer
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dns_privacy_reference_material/" title="DNS Privacy Reference Material" class="dd-item
        
        
        
        ">
      <a href="/dns_privacy_reference_material/">
          12. DNS Privacy Reference Material
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/performance_measurements/" title="Performance Measurements" class="dd-item
        
        
        
        ">
      <a href="/performance_measurements/">
          13. Performance Measurements
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/performance_measurements/initial_performance_measurements_q1_2018/" title="Initial Performance Measurements (Q1 2018)" class="dd-item ">
        <a href="/performance_measurements/initial_performance_measurements_q1_2018/">
        12.1. Initial Performance Measurements (Q1 2018)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/performance_measurements/follow-up_performance_measurements_q4_2108/" title="Follow-Up Performance Measurements (Q4 2108)" class="dd-item ">
        <a href="/performance_measurements/follow-up_performance_measurements_q4_2108/">
        12.2. Follow-Up Performance Measurements (Q4 2108)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/performance_measurements/review_of_dns_and_http_pm_tools/" title="Review of DNS and HTTP PM Tools" class="dd-item ">
        <a href="/performance_measurements/review_of_dns_and_http_pm_tools/">
        12.3. Review of DNS and HTTP PM Tools
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/performance_measurements/proposal_for_new_performance_tool/" title="Proposal for New Performance Tool" class="dd-item ">
        <a href="/performance_measurements/proposal_for_new_performance_tool/">
        12.4. Proposal for New Performance Tool
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ndss_dns_privacy_workshop/" title="NDSS DNS Privacy Workshop" class="dd-item
        
        
        
        ">
      <a href="/ndss_dns_privacy_workshop/">
          14. NDSS DNS Privacy Workshop
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/" title="2021 NDSS DNS Privacy Workshop" class="dd-item
        
        
        
        ">
      <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/">
          14.1. 2021 NDSS DNS Privacy Workshop
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/call_for_papers/" title="Call for Papers" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/call_for_papers/">
        14.1.1. Call for Papers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/" title="Workshop Notes" class="dd-item
        
        
        
        ">
      <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/">
          14.1.2. Workshop Notes
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_1/" title="Zoom Breakout Room 1: Measurement of Encrypted DNS" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_1/">
        14.1.2.1. Zoom Breakout Room 1: Measurement of Encrypted DNS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_2/" title="Zoom Breakout Room 2: Civil Society, Usability and DNS" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_2/">
        14.1.2.2. Zoom Breakout Room 2: Civil Society, Usability and DNS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_3/" title="Zoom Breakout Room 3: Novel Work, ADoT and Future Research" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2021_ndss_dns_privacy_workshop/workshop_notes/breakout_room_3/">
        14.1.2.3. Zoom Breakout Room 3: Novel Work, ADoT and Future Research
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2018_ndss_dns_privacy_workshop/" title="2018 NDSS DNS Privacy Workshop" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2018_ndss_dns_privacy_workshop/">
        14.2. 2018 NDSS DNS Privacy Workshop
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ndss_dns_privacy_workshop/2017_ndss_dns_privacy_workshop/" title="2017 NDSS DNS Privacy Workshop" class="dd-item ">
        <a href="/ndss_dns_privacy_workshop/2017_ndss_dns_privacy_workshop/">
        14.3. 2017 NDSS DNS Privacy Workshop
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/dnsprivacy"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://twitter.com/DNSPrivacyProj"><i class='fab fa-twitter'></i> Twitter</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.youtube.com/channel/UCaJWMY-m9ktZIbUNMi0Eh9g/playlists"><i class='fab fa-youtube'></i> YouTube</a>
              </li>
          
              <li>
                  <a class="padding" href="https://sinodun.com"><i class='fas fa-bookmark'></i> Sinodun IT</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.nlnetlabs.nl/"><i class='fas fa-bookmark'></i> NLnetLabs</a>
              </li>
          
              <li>
                  <a class="padding" href="http://dnsprivacy.org/ndss_dns_privacy_workshop"><i class='fas fa-bookmark'></i> NDSS DNS Privacy Workshop</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn">Hugo Theme Learn</a> and <a href="https://gohugo.io/">Hugo</a></p>
<p>Built by <a href="sinodun.com">Sinodun Internet Technologies.</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>DNS Privacy Project</a> > <a href='/dns_privacy_daemon_-_stubby/'>DNS Privacy Daemon - Stubby</a> > Configuring Stubby
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#create-custom-configuration-file">Create Custom Configuration File</a>
      <ul>
        <li><a href="#dnssec">DNSSEC</a>
          <ul>
            <li><a href="#storage-of-zero-config-trust-anchor">Storage of Zero-config Trust anchor</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#opportunistic-dot-to-your-local-resolver">Opportunistic DoT to your local resolver</a></li>
    <li><a href="#runtime-logging">Runtime logging</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Configuring Stubby
            </h1>
          

        


<div class="toc">
  <nav id="TableOfContents">
  <ul>
    <li><a href="#create-custom-configuration-file">Create Custom Configuration File</a>
      <ul>
        <li><a href="#dnssec">DNSSEC</a>
          <ul>
            <li><a href="#storage-of-zero-config-trust-anchor">Storage of Zero-config Trust anchor</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#opportunistic-dot-to-your-local-resolver">Opportunistic DoT to your local resolver</a></li>
    <li><a href="#runtime-logging">Runtime logging</a></li>
  </ul>
</nav>
</div>

<div class="notices infoblock" ><p>It is recommended to use the default configuration file provided which
will use &lsquo;Strict&rsquo; privacy mode and spread the DNS queries among several
of the current DNS Privacy test servers. Note that this file contains
both IPv4 and IPv6 addresses.</p>
<p>Note also that this file only enables a small subset of the available
servers by default. Users can choose to use additional servers by
uncommenting the relevant sections in the file. See <a href="/test_servers">DNS Privacy Test
Servers</a> for details of the available servers.</p>
</div>


<div class="notices warning" ><p>As announced over the last 6 months, the dnsovertls*.sinodun.com nameservers were decommissioned on 9th Septemter 2022. <a href="https://lists.getdnsapi.net/pipermail/users/2022-September/000469.html">See this announcement</a>.</p>
</div>

<h2 id="create-custom-configuration-file">Create Custom Configuration File</h2>
<p>Alternatively the configuration file location can be specified on the
command line using the <code>-C</code> flag. Changes to the configuration file
require a restart of Stubby.</p>

<div class="notices tip" ><p>From release 0.1.3 of stubby (using the 1.2 release of getdns) the
configuration file format is a YAML like format, which contains detailed
comments of the options. <a href="https://github.com/getdnsapi/stubby/blob/develop/stubby.yml.example">See here for an
example</a>
or keep reading for a short description. <em>To be backwards compatible a
file using the YAML format <strong>must</strong> have a .yml or .yaml extension.</em>
The previously used <a href="https://getdnsapi.net/doxygen/group__Ustring2getdns__data.html">JSON like format used internally in
getdns</a>
is still supported but only when the configuration file is specified via
the command line using the -C flag. This format is the same as the
output returned by <code>stubby -i</code>. For example, this output can be used as
a configuration file directly, but a less verbose form is also accepted.</p>
</div>

<p>Essentially the options available are the same as the options that can
be set on a getdns <strong><code>context.</code></strong> </p>
<ul>
<li>Doxygen documentation for the <strong><code>context</code></strong> options is
available <a href="https://getdnsapi.net/doxygen/group__getdns__context.html">here</a>. </li>
<li>A detailed description of the <a href="https://getdnsapi.net/documentation/spec/#8-dns-contexts">context settings is in the
API</a></li>
<li>A detailed description of <a href="https://getdnsapi.net/documentation/spec/#3-extensions">all the extensions than can also be used
is also in the
API</a>.</li>
</ul>
<p>To aid with creating a custom configuration file, an example is given
below. The config file below will configure Stubby in the following ways:</p>
<ul>
<li><strong><code>resolution_type</code>:</strong> Work in stub mode only (not recursive mode) -
required for Stubby operation.</li>
<li><strong><code>dns_transport_list</code>:</strong> Use TLS only as a transport (no fallback
to UDP or TCP).</li>
<li><strong><code>tls_authentication</code>:</strong> Use Strict Privacy i.e. require a TLS
connection and authentication of the upstream
<ul>
<li>If Opportunistic mode is desired,  remove
the <em>tls_authentication: GETDNS_AUTHENTICATION_REQUIRED</em> field
and add additional transports to the <em>dns_transport_list</em> (e.g.
UDP, TCP) . In Opportunistic mode authentication of the
nameserver is not required and fallback to clear text transports
is permitted <strong>if</strong> they are in the dns_transport_list.</li>
</ul>
</li>
<li><strong><code>tls_query_padding_blocksize</code>:</strong> Use the EDNS0 padding option to
pad DNS queries to hide their size</li>
<li><strong><code>edns_client_subnet_private</code>:</strong> Use EDNS0 Client Subnet privacy so
the client subnet is not sent to authoritative servers</li>
<li><strong><code>listen_address</code>:</strong> have the Stubbby daemon listen on IPv4 and
IPv6 on port 53 on the loopback address</li>
<li><strong><code>idle_timeout</code>:</strong> Use an EDNS0 Keepalive idle timeout of 10s
unless overridden by the server. This keeps idle TLS connections
open to avoid the overhead of opening a new connection for every
query.</li>
<li><strong><code>round_robin_upstreams</code>:</strong> Round robin queries across all the
configured upstream servers. Without this option Stubby will use
each upstream server sequentially until it becomes unavailable and
then move on to use the next.</li>
<li><strong><code>upstream_recursive_servers</code>:</strong> Use the NLnet labs test DNS
Privacy Server for outgoing queries. In Strict Privacy mode, at
least one of the following is required for each nameserver:
<ul>
<li><strong><code>tls_auth_name</code>:</strong> This is the authentication domain name that
will be verified against the presented certificate.</li>
<li><strong><code>tls_pubkey_pinset</code>:</strong> The sha256 SPKI pinset for the server.
This is also verified against the presented certificate.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">resolution_type</span>: <span style="color:#ae81ff">GETDNS_RESOLUTION_STUB</span>
<span style="color:#f92672">dns_transport_list</span>: 
  - <span style="color:#ae81ff">GETDNS_TRANSPORT_TLS</span>
<span style="color:#f92672">tls_authentication</span>: <span style="color:#ae81ff">GETDNS_AUTHENTICATION_REQUIRED</span>
<span style="color:#f92672">tls_query_padding_blocksize</span>: <span style="color:#ae81ff">256</span>
<span style="color:#f92672">edns_client_subnet_private </span>: <span style="color:#ae81ff">1</span>
<span style="color:#f92672">idle_timeout</span>: <span style="color:#ae81ff">10000</span>
<span style="color:#f92672">listen_addresses</span>:
  - <span style="color:#ae81ff">127.0.0.1</span>
  -  <span style="color:#ae81ff">0</span>::<span style="color:#ae81ff">1</span>
<span style="color:#f92672">round_robin_upstreams</span>: <span style="color:#ae81ff">1</span>
<span style="color:#f92672">upstream_recursive_servers</span>:
  - <span style="color:#f92672">address_data</span>: <span style="color:#ae81ff">185.49.141.38</span>
    <span style="color:#f92672">tls_auth_name</span>: <span style="color:#e6db74">&#34;getdnsapi.net&#34;</span>
    <span style="color:#f92672">tls_pubkey_pinset</span>:
      <span style="color:#f92672">digest</span>: <span style="color:#e6db74">&#34;sha256&#34;</span>
       <span style="color:#f92672">value</span>: <span style="color:#ae81ff">foxZRnIh9gZpWnl+zEiKa0EJ2rdCGroMWm02gaxSc9Q=</span>
</code></pre></div><p>Additional privacy servers can be specified by adding more entries to
the <code>upstream_recursive_servers</code> list above (note a separate entry must
be made for the IPv4 and IPv6 addresses of a given server. More DNS
Privacy test servers are
listed <a href="https://dnsprivacy.org/wiki/x/E4AT">here</a>.</p>
<p>A custom port can be specified by adding the <code>tls_port:</code> attribute to
the <code>upstream_recursive_server</code> in the config file.</p>
<p>A custom listen address port can be configured by using the
&lt;IP_address&gt;@&lt;port&gt; syntax</p>
<h3 id="dnssec">DNSSEC</h3>
<p>To enable DNSSEC validation when using Stubby add the following option
to the configuration file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">dnssec_return_status</span>: <span style="color:#ae81ff">GETDNS_EXTENSION_TRUE</span>
</code></pre></div><p>A trust anchor is also required for DNSSEC validation. </p>
<p><em>getdns</em> version 1.2 and later include support for automatic trust
anchor management - which will automatically fetch a trust anchor if
none is present on the system. See &lsquo;<a href="https://dnsprivacy.org/wiki/display/DP/Configuring+Stubby#ConfiguringStubby-DNSSEC">Zero configuration
DNSSEC</a>&rsquo;  (and
below) for the specific details of key management for DNSSEC for this
case. 
If using a version of <em>getdns</em> earlier than 1.2 then a trust anchor must
be <strong>manually</strong> installed and managed on the system. <a href="https://getdnsapi.net/documentation/readme/#dnssec-dependencies">We recommend
using <em>unbound-anchor</em></a>.</p>
<h4 id="storage-of-zero-config-trust-anchor">Storage of Zero-config Trust anchor</h4>
<p>When the system-level user does have a home directory, stubby will store
the for Zero configuration DNSSEC dynamically acquired root trust anchor
in a subdirectory called &ldquo;.getdns&rdquo; of that home directory (or in &ldquo;%AppData%\getdns&rdquo; on Windows). If the
system-level user does not have a home directory or the home directory
is not writeable or readable, stubby will fallback to the current
working directory.</p>
<p>This can be overruled by supplying a &ldquo;<code>appdata_dir</code>&rdquo; in the <code>stubby.yml</code>
configuration file. When a &ldquo;<code>appdata_dir</code>&rdquo; was specified, that directory
will be used for storing data related to Zero configuration DNSSEC
immediately, without the other paths being tried. It is recommended for
systemd setups using the provided systemd.service file(s) to have a
&ldquo;<code>appdata_dir</code>&rdquo; directive set to &ldquo;<code>/var/cache/stubby</code>&rdquo; in the stubby.yml
configuration file.</p>
<p>Note that using DNSSEC can add a small performance overhead because it
increases the number of queries required to resolve a DNS request.</p>
<h2 id="opportunistic-dot-to-your-local-resolver">Opportunistic DoT to your local resolver</h2>
<p>Some users may want to have a configuration for Stubby that will always
use the resolver from the system configuration (most likely but not
always on the local network), but with encryption used where possible.
This is an <strong>Opportunistic</strong> mode which does not authenticate the DoT
server. To configure Stubby in this mode:</p>
<ol>
<li>
<p>Set the transport list and authentication parameter in the
configuration to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">dns_transport_list</span>: 
 - <span style="color:#ae81ff">GETDNS_TRANSPORT_TLS</span>
 - <span style="color:#ae81ff">GETDNS_TRANSPORT_UDP</span>
 - <span style="color:#ae81ff">GETDNS_TRANSPORT_TCP</span>
<span style="color:#f92672">tls_authentication</span>: <span style="color:#ae81ff">GETDNS_AUTHENTICATION_NONE</span>
</code></pre></div></li>
<li>
<p>Remove (or comment out) all the upstream_resolvers. This will cause
Stubby to fallback to using the system resolvers only.</p>
</li>
</ol>
<p>Note: a future version of Stubby will most likely support a mixed mode
of system resolvers and configured resolvers. </p>
<h2 id="runtime-logging">Runtime logging</h2>
<p>In the 0.1.2 release of stubby there is runtime logging, which can be
turned on by using the &lsquo;-l&rsquo; flag.</p>
<p>In the 0.1.3 release the logging level is be controlled by specifying a
logging level via the &lsquo;-v&rsquo; flag. See stubby help (&lsquo;stubby -h&rsquo;) for more
details. </p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1669828798"></script>
    <script src="/js/perfect-scrollbar.min.js?1669828798"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1669828798"></script>
    <script src="/js/jquery.sticky.js?1669828798"></script>
    <script src="/js/featherlight.min.js?1669828798"></script>
    <script src="/js/highlight.pack.js?1669828798"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1669828798"></script>
    <script src="/js/learn.js?1669828798"></script>
    <script src="/js/hugo-learn.js?1669828798"></script>
    
    

  </body>
</html>

